<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YSL — EDEN 2049</title>

    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  </head>

  <body>
    <a-scene fog="type: linear; color: #111; near: 6; far: 14">
      <a-light type="ambient" color="#ffffff" intensity="0.05"> </a-light>

      <!-- ASSETS -->
      <a-assets>
        <img id="floorTex" src="textures/concrete_floor.jpg" />
        <img id="wallTex" src="textures/white_wall.jpg" />
        <img id="ceilingTex" src="textures/white_wall.jpg" />
        
        <a-asset-item
          id="terminal"
          src="assets/master_control.glb"
        ></a-asset-item>
        <a-asset-item
          id="grass"
          src="assets/grass.glb"
        ></a-asset-item>

      </a-assets>

      <!-- SOL -->
      <a-cylinder
        position="0 0 0"
        radius="7"
        height="0.1"
        material="src: #floorTex; repeat: 6 6; roughness: 0.9"
      >
      </a-cylinder>

      <!-- ANNEAU LUMINEUX -->
      <a-ring
        position="0 0.12 0"
        rotation="-90 0 0"
        radius-inner="6.6"
        radius-outer="6.75"
        material="
            color: #ffffff;
            emissive: #ffffff;
            emissiveIntensity: 6;"
      >
      </a-ring>

      <a-light
        type="point"
        position="0 0.8 0"
        color="#ffffff"
        intensity="2"
        distance="12"
        decay="2"
      >
      </a-light>

      <a-light
        type="point"
        position="0 3 0"
        color="#ffffff"
        intensity="0.6"
        distance="10"
        decay="2"
      >
      </a-light>

      <!-- LUMIÈRES DE L’ANNEAU (PROJECTION VERTICALE) -->
      <a-entity>
        <a-light
          type="point"
          position="0 0.25 -6.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="4.9 0.25 -4.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="6.9 0.25 0"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="4.9 0.25 4.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="0 0.25 6.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="-4.9 0.25 4.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="-6.9 0.25 0"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
        <a-light
          type="point"
          position="-4.9 0.25 -4.9"
          intensity="0.6"
          distance="6"
          decay="2"
        ></a-light>
      </a-entity>

      <!-- MURS CIRCULAIRES -->
      <a-cylinder
        class="solid"
        position="0 3 0"
        radius="7"
        height="6"
        open-ended="true"
        material="src: #wallTex; color: #e6e6e6;
            repeat: 8 2;
            roughness: 1;
            metalness: 0;
            side: double;"
      >
      </a-cylinder>

      <!-- PLAFOND -->
      <a-cylinder
        position="0 6 0"
        radius="7"
        height="0.1"
        material="src: #floorTex; repeat: 4 4; color: #dcdcdc;
            roughness: 1;"
      >
      </a-cylinder>

      <!-- TERMINAL CENTRAL -->
      <a-entity id="terminalTrigger" class="solid clickable">
        <a-entity
          gltf-model="#terminal"
          position="0 0 0"
          scale="0.2 0.2 0.2"
        ></a-entity>
        <!-- Zone de clic visible pour debug -->
        <a-cylinder
          position="0 0.5 0"
          radius="0.5"
          height="1"
          material="color: #ff0000; opacity: 0.3; transparent: true"
        ></a-cylinder>
      </a-entity>

      <a-entity
        id="grass"
        gltf-model="#grass"
        position="0 0 0"
        scale="0 0 0">
      </a-entity>

      <!-- CAMERA AVEC CONTROLES VR ET DESKTOP -->
      <a-entity id="rig" position="0 0 0">
        <a-camera
          position="0 1.6 3"
          fov="60"
          wasd-controls="acceleration: 20"
          look-controls
          aabb-collider="objects: .solid"
        >
          <!-- CURSOR DESKTOP -->
          <a-cursor
            animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150; dir: alternate"
            color="#ffffff"
            opacity="0.8"
            raycaster="objects: .clickable"
          ></a-cursor>
        </a-camera>
        
        <!-- CONTROLES VR MAIN GAUCHE -->
        <a-entity
          hand-controls="hand: left; handModelStyle: lowPoly; color: #ffffff"
          laser-controls="hand: left"
          raycaster="objects: .clickable; far: 20; lineColor: red; lineOpacity: 0.8; direction: 0 0 -1"
          rotation="0 0 0"
        ></a-entity>
        
        <!-- CONTROLES VR MAIN DROITE -->
        <a-entity
          hand-controls="hand: right; handModelStyle: lowPoly; color: #ffffff"
          laser-controls="hand: right"
          raycaster="objects: .clickable; far: 20; lineColor: red; lineOpacity: 0.8; direction: 0 0 -1"
          rotation="0 0 0"
        ></a-entity>
      </a-entity>
    </a-scene>

    <script src="main.js"></script>
  </body>
</html>